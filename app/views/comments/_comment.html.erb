<div class="flex items-start space-x-3 py-3 border-b border-gray-100 last:border-b-0">
  <!-- User Avatar -->
  <div class="w-8 h-8 rounded-full overflow-hidden flex-shrink-0">
    <% if comment.user.avatar.attached? %>
      <%= image_tag comment.user.avatar, class: "w-full h-full object-cover" %>
    <% else %>
      <div class="w-full h-full bg-blue-500 flex items-center justify-center">
        <span class="text-xs font-medium text-white"><%= comment.user.name.first.upcase %></span>
      </div>
    <% end %>
  </div>
  
  <!-- Comment Content -->
  <div class="flex-1 min-w-0">
    <div class="flex items-center space-x-2 mb-1">
      <h4 class="text-sm font-semibold text-gray-900"><%= comment.user.name %></h4>
      <span class="text-xs text-gray-500">â€¢</span>
      <span class="text-xs text-gray-500"><%= time_ago_in_words(comment.created_at) %> ago</span>
    </div>
    
    <p class="text-sm text-gray-800 whitespace-pre-wrap"><%= comment.content %></p>
    
    <!-- Comment Actions -->
    <div class="flex items-center space-x-4 mt-2">
      <!-- Like Comment Button (Future Feature) -->
      <button class="text-xs text-gray-500 hover:text-gray-700 transition-colors duration-200">
        Like
      </button>
      
      <!-- Reply Button (Future Feature) -->
      <button class="text-xs text-gray-500 hover:text-gray-700 transition-colors duration-200">
        Reply
      </button>
      
      <!-- Edit/Delete Options (only for comment author or post author) -->
      <% if comment.user == current_user || comment.post.user == current_user %>
        <div class="relative group">
          <button class="text-xs text-gray-500 hover:text-gray-700 transition-colors duration-200">
            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"/>
            </svg>
          </button>
          
          <!-- Dropdown Menu -->
          <div class="absolute right-0 mt-1 w-32 bg-white rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10 border border-gray-200">
            <div class="py-1">
              <% if comment.user == current_user %>
                <!-- Edit Comment -->
                <button onclick="editComment(<%= comment.id %>)" class="w-full text-left px-3 py-1 text-xs text-blue-600 hover:bg-blue-50 transition-colors duration-200">
                  Edit
                </button>
              <% end %>
              
              <!-- Delete Comment -->
              <%= link_to post_comment_path(comment.post, comment), 
                  data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this comment?" }, 
                  class: "w-full text-left px-3 py-1 text-xs text-red-600 hover:bg-red-50 transition-colors duration-200" do %>
                Delete
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
